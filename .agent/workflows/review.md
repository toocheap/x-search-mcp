---
description: コードレビュー・協議ワークフロー — 実装計画を3視点でレビューする
---

# コードレビュー・協議ワークフロー

実装計画または実装済みコードを3つの視点でレビューし、品質を担保する。

## 1. レビュー対象の特定

1. レビュー対象ファイルを特定する（`implementation_plan.md` または変更されたソースコード）

## 2. 実装者視点レビュー

2. 以下を確認する:
   - CLAUDE.md のコーディング規約に準拠しているか
   - 型ヒント、Pydantic モデル、`async def` の使用が適切か
   - エラーハンドリングが `_handle_api_error()` パターンに従っているか
   - 環境変数が関数内で動的に取得されているか

## 3. QA 視点レビュー

3. 以下を確認する:
   - テストケースが正常系・異常系の両方をカバーしているか
   - カバレッジ 100% に向けた計画が含まれているか
   - モック・スタブが不必要に使われていないか（使用する場合は理由が明記されているか）
   - 統合テストが必要な変更か、サブプロセス実行の考慮があるか

## 4. 計画担当視点レビュー

4. 以下を確認する:
   - 変更のスコープが適切か（過大・過小でないか）
   - 他のツールやヘルパー関数への影響がないか
   - 将来の拡張性を損なわないか

## 5. リーダー判断

5. 総合的に判断する:
   - 実装が本来の目的に合致しているか
   - **一時しのぎの修正になっていないか**（根本原因に対処しているか）
   - アーキテクチャの一貫性が保たれているか

## 6. 結果の反映

6. レビュー結果を `implementation_plan.md` またはコードに反映する
7. 問題がなければ実装・テストに進む
